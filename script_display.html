<!DOCTYPE html>
<html>
<head>
    <title>Generated Script</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .script-content { background: #f9f9f9; padding: 20px; border-radius: 5px; white-space: pre-wrap; border-left: 4px solid #d4a574; }
        .loading { text-align: center; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <div id="content" class="loading">ü§ñ Generating your script...</div>
    </div>

    <script>
        async function loadScript() {
            const params = new URLSearchParams(window.location.search);
            const title = params.get('title');
            const type = params.get('type');
            
            if (!title || !type) {
                document.getElementById('content').innerHTML = '<h2>Error: Missing parameters</h2>';
                return;
            }
            
            document.title = `${type.toUpperCase()} Script`;
            
            const prompt = type === 'tiktok' 
                ? `You're a viral tech content creator making short-form videos for YouTube Shorts and TikTok.

Your goal is to turn trending tech topics into engaging 60-second scripts with high watch retention.

Based on this topic: ${title}

Write a script for a 60-second short-form video.

‚ö†Ô∏è Important: Only give me the exact spoken words I would say in the video ‚Äî no visual directions, no voiceover labels, no stage cues. Just pure dialogue.

The tone should be casual, punchy, and confident ‚Äî like I‚Äôm speaking directly to the viewer.

Structure the script to include:

A strong hook in the first 3 seconds

A simple breakdown of what‚Äôs happening

Why it matters

A surprising or controversial insight (optional)

A powerful CTA at the end (e.g., ‚ÄúFollow for more‚Äù or a question for comments)

Return only the spoken script. At the end, give me:

3 title suggestions

A video description

3‚Äì5 relevant hashtags

A suggested pinned comment`
                : `Create a 5-minute YouTube script about: ${title}. Include intro, main points, and conclusion. Make it informative and engaging. Raw script only`;
            
            try {
                const response = await fetch('http://localhost:8000/api/generate-script', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt, type })
                });
                
                const data = await response.json();
                
                if (data.error) {
                    document.getElementById('content').innerHTML = `<h2>Error</h2><p>${data.error}</p>`;
                    return;
                }
                
                document.getElementById('content').innerHTML = `
                    <h2>${type.toUpperCase()} Script</h2>
                    <h3>${title}</h3>
                    <div class="script-content">${data.script}</div>
                `;
            } catch (error) {
                document.getElementById('content').innerHTML = `<h2>Error</h2><p>${error.message}</p>`;
            }
        }
        
        loadScript();
    </script>
</body>
</html>